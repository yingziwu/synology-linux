EXTRA_CFLAGS += -I$(srctree)/drivers/target/ -I$(srctree)/include/scsi/ -I$(srctree)/drivers/target/lio-target

EXTRA_CFLAGS+=-D_TARGET -DPYX_ISCSI_VENDOR='"Linux-iSCSI.org"'

iscsi_target_mod-objs		:=	iscsi_auth_chap.o \
					iscsi_crc.o \
					iscsi_debug_opcodes.o \
					iscsi_parameters.o \
					iscsi_seq_and_pdu_list.o \
					iscsi_serial.o \
					iscsi_thread_queue.o \
					iscsi_target_datain_values.o \
					iscsi_target_device.o \
					iscsi_target_discovery.o \
					iscsi_target_erl0.o \
					iscsi_target_erl1.o \
					iscsi_target_erl2.o \
					iscsi_target_login.o \
					iscsi_target_nego.o \
					iscsi_target_nodeattrib.o \
					iscsi_target_tmr.o \
					iscsi_target_tpg.o \
					iscsi_target_util.o \
					iscsi_target.o \
					div64.o \
					iscsi_target_configfs.o
ifdef CONFIG_LIO_TARGET_SNMP
iscsi_target_mod-objs		+= iscsi_target_mib.o
EXTRA_CFLAGS			+= -DSNMP_SUPPORT
endif

ifdef CONFIG_LIO_TARGET_DEBUG_ERL
iscsi_target_mod-objs		+= iscsi_target_debugerl.o
EXTRA_CFLAGS			+= -DDEBUG_ERL
endif

ifdef CONFIG_LIO_TARGET_DEBUG
EXTRA_CFLAGS			+= -DCONFIG_ISCSI_DEBUG=1
endif


obj-$(CONFIG_LIO_TARGET)	+= iscsi_target_mod.o
