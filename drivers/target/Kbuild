EXTRA_CFLAGS += -I$(srctree)/drivers/target/ -I$(srctree)/drivers/scsi/

target_core_mod-y		:= target_core_configfs.o \
				   target_core_device.o \
				   target_core_hba.o \
				   target_core_plugin.o \
				   target_core_pr.o \
				   target_core_alua.o \
				   target_core_scdb.o \
				   target_core_seobj.o \
				   target_core_tmr.o \
				   target_core_tpg.o \
				   target_core_transport.o \
				   target_core_ua.o

ifdef CONFIG_TCM_IBLOCK
target_core_mod-y		+= target_core_iblock.o
EXTRA_CFLAGS			+= -DPYX_IBLOCK
endif

ifdef CONFIG_TCM_PSCSI
target_core_mod-y		+= target_core_pscsi.o
EXTRA_CFLAGS			+= -DPARALLEL_SCSI
endif

ifdef CONFIG_TCM_STGT
target_core_mod-y		+= target_core_stgt.o
EXTRA_CFLAGS			+= -DSTGT_PLUGIN
endif

ifdef CONFIG_TCM_RAMDISK
target_core_mod-y		+= target_core_rd.o
EXTRA_CFLAGS			+= -DPYX_RAMDISK
endif

ifdef CONFIG_TCM_FILEIO
target_core_mod-y		+= target_core_file.o
EXTRA_CFLAGS			+= -DPYX_FILEIO
endif

ifdef CONFIG_TCM_SNMP
target_core_mod-y		+= target_core_mib.o
EXTRA_CFLAGS			+= -DSNMP_SUPPORT
endif

ifdef CONFIG_TCM_PSCSI_VPD_PAGE_CHECK
EXTRA_CFLAGS			+= -DLINUX_VPD_PAGE_CHECK
endif

ifdef CONFIG_TCM_DEBUG_DEV
EXTRA_CFLAGS			+= -DDEBUG_DEV
endif

obj-$(CONFIG_TARGET_CORE)	+= target_core_mod.o

obj-$(CONFIG_LIO_TARGET)	+= lio-target/
obj-$(CONFIG_TCM_LOOP_FABRIC)	+= tcm_loop/
